# 树莓派系统安装及配置

## 系统安装
### 下载Raspberry Pi Imager
浏览器输入[https://www.raspberrypi.com/software/](https://www.raspberrypi.com/software/)进入下载页面，点击`Download For Windows`按钮下载。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/763022/1667223279656-e4c612ca-0369-4ef5-819d-26a56ba8b4cd.png#averageHue=%23e8f2fb&clientId=ub268c121-c969-4&from=paste&height=745&id=u41c4a51f&originHeight=745&originWidth=1191&originalType=binary&ratio=1&rotation=0&showTitle=false&size=131407&status=done&style=none&taskId=u87b477f6-d36f-4a1d-b41d-df99f0bc792&title=&width=1191)
### 下载Raspberry Pi OS系统镜像
浏览器输入[https://www.raspberrypi.com/software/operating-systems/](https://www.raspberrypi.com/software/operating-systems/)进入镜像下载页面，推荐下载`Raspberry Pi OS Lite`。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/763022/1667223337741-efcf2934-eb43-42f1-98a3-d01e2fb5ce88.png#averageHue=%23fdfcfc&clientId=ub268c121-c969-4&from=paste&height=742&id=ue8b25bf7&originHeight=742&originWidth=1312&originalType=binary&ratio=1&rotation=0&showTitle=false&size=86751&status=done&style=none&taskId=u50d3a81f-8627-48cc-bcfd-aac7fbebe31&title=&width=1312)
### 系统镜像烧录
插入SD卡，安装并打开Raspberry Pi Imager。`选择操作系统`选`使用自定义镜像`，`选择SD卡`选我们插入的SD卡。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/763022/1667223779035-5984f0d9-27d5-4465-b79c-a7f41562b7e3.png#averageHue=%23659a70&clientId=ub268c121-c969-4&from=paste&height=452&id=uc17bdb26&originHeight=452&originWidth=682&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34552&status=done&style=none&taskId=u14ef935d-f6b9-46a1-9f6f-ed82d718b66&title=&width=682)<br />在烧录之前可以对系统进行配置，配置内容包括：

- 设置主机名
- 开启SSH服务
- 设置登录账户密码
- 配置WiFi
- 语言设置

![image.png](https://cdn.nlark.com/yuque/0/2022/png/763022/1667225724134-2b3ad0bd-80fe-4e38-adf5-80635339f908.png#averageHue=%23d6bb9d&clientId=uef09ccf0-903d-4&from=paste&height=452&id=ucc7ae291&originHeight=452&originWidth=682&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31489&status=done&style=none&taskId=u6b501e0c-089e-4b9b-ae9a-9abbe13fb8e&title=&width=682)<br />配置完成后，点击`烧录`，会格式化SD卡并写入系统镜像。<br />烧录完成后，将SD卡插入树莓派，接通电源，开机。
### 配置apt软件源
参考以下配置<br />阿里云Raspbian镜像：[https://developer.aliyun.com/mirror/raspbian](https://developer.aliyun.com/mirror/raspbian)<br />清华源Raspbian镜像：[https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/](https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/)<br />更新软件源列表，更新软件版本：
```bash
# 更新软件源列表
sudo apt update
# 更新软件
sudo apt upgrade
```
###    控制台设置中文环境
执行`sudo raspi-config`进入配置界面，`Localisation options`->`Locale`选择`zh_CN.UTF-8`并确认。<br />执行 `sudo nano /etc/default/locale` 修改配置文件为如下内容：
```toml
LANG=zh_CN.UTF-8
LANGUAGE=zh_CN:zh
LC_NUMERIC=zh_CN
LC_TIME=zh_CN
LC_MONETARY=zh_CN
LC_PAPER=zh_CN
LC_NAME=zh_CN
LC_ADDRESS=zh_CN
LC_TELEPHONE=zh_CN
LC_MEASUREMENT=zh_CN
LC_IDENTIFICATION=zh_CN
LC_ALL=zh_CN.UTF-8
```
执行 `sudo nano /etc/environment` 在环境配置文件追加以下内容：
```toml
LANG=zh_CN.UTF-8
LANGUAGE=zh_CN:zh
LC_NUMERIC=zh_CN
LC_TIME=zh_CN
LC_MONETARY=zh_CN
LC_PAPER=zh_CN
LC_NAME=zh_CN
LC_ADDRESS=zh_CN
LC_TELEPHONE=zh_CN
LC_MEASUREMENT=zh_CN
LC_IDENTIFICATION=zh_CN
LC_ALL=zh_CN.UTF-8
```
重启后控制台即切换为中文环境。
### swap扩容
默认的100M swap不太够用，修改为2G。<br />查看所有swap：
```bash
swapon --show
```
编辑`/etc/dphys-swapfile`修改swap默认大小为2G：
```nginx
CONF_SWAPSIZE=2048
```
重启后生效。
