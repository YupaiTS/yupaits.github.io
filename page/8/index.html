<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>yupaits的博客</title><meta name="keywords" content="yupaits,YupaiTS"><meta name="author" content="yupaits"><meta name="copyright" content="yupaits"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="俯仰一生，最惧无为">
<meta property="og:type" content="website">
<meta property="og:title" content="yupaits的博客">
<meta property="og:url" content="http://yupaits.com/page/8/index.html">
<meta property="og:site_name" content="yupaits的博客">
<meta property="og:description" content="俯仰一生，最惧无为">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yupaits.com/favicon.png">
<meta property="article:author" content="yupaits">
<meta property="article:tag" content="yupaits,YupaiTS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yupaits.com/favicon.png"><link rel="shortcut icon" href="/favicon.png"><link rel="canonical" href="http://yupaits.com/page/8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-8239100633886634',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f4c5dd32b8bff25dd776c28eb5bf436d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'yupaits的博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-08-23 23:52:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">216</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">161</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 专题</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%96%87%E7%AB%A0%E6%94%B6%E5%BD%95/"><i class="fa-fw fas fa-newspaper"></i><span> 文章收录</span></a></li><li><a class="site-page child" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"><i class="fa-fw fas fa-server"></i><span> 架构设计</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/"><i class="fa-fw fas fa-database"></i><span> 数据结构-算法</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><i class="fa-fw fas fa-bezier-curve"></i><span> 设计模式</span></a></li><li><a class="site-page child" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/"><i class="fa-fw fas fa-network-wired"></i><span> 分布式系统原理</span></a></li><li><a class="site-page child" href="/categories/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84/"><i class="fa-fw fas fa-network-wired"></i><span> 大型网络应用架构</span></a></li><li><a class="site-page child" href="/categories/Java%E5%9F%BA%E7%A1%80/"><i class="fa-fw fab fa-java"></i><span> Java基础</span></a></li><li><a class="site-page child" href="/categories/Java%E8%BF%9B%E9%98%B6/"><i class="fa-fw fab fa-java"></i><span> Java进阶</span></a></li><li><a class="site-page child" href="/categories/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/"><i class="fa-fw fab fa-java"></i><span> JVM虚拟机</span></a></li><li><a class="site-page child" href="/categories/Spring/"><i class="fa-fw fab fa-dev"></i><span> Spring</span></a></li><li><a class="site-page child" href="/categories/SpringCloud/"><i class="fa-fw fab fa-dev"></i><span> SpringCloud</span></a></li><li><a class="site-page child" href="/categories/Golang/"><i class="fa-fw fab fa-dev"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/Docker/"><i class="fa-fw fab fa-docker"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"><i class="fa-fw fab fa-raspberry-pi"></i><span> 树莓派</span></a></li><li><a class="site-page child" href="/categories/yutool/"><i class="fa-fw fab fa-dev"></i><span> yutool系列</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/projects/"><i class="fa-fw fas fa-chart-bar"></i><span> 项目</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></div><div class="menus_item"><a class="site-page" href="/sites/"><i class="fa-fw fas fa-sitemap"></i><span> 站点</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/cover/cover-eclipse.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">yupaits的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 专题</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%96%87%E7%AB%A0%E6%94%B6%E5%BD%95/"><i class="fa-fw fas fa-newspaper"></i><span> 文章收录</span></a></li><li><a class="site-page child" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"><i class="fa-fw fas fa-server"></i><span> 架构设计</span></a></li><li><a class="site-page child" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/"><i class="fa-fw fas fa-database"></i><span> 数据结构-算法</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><i class="fa-fw fas fa-bezier-curve"></i><span> 设计模式</span></a></li><li><a class="site-page child" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/"><i class="fa-fw fas fa-network-wired"></i><span> 分布式系统原理</span></a></li><li><a class="site-page child" href="/categories/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84/"><i class="fa-fw fas fa-network-wired"></i><span> 大型网络应用架构</span></a></li><li><a class="site-page child" href="/categories/Java%E5%9F%BA%E7%A1%80/"><i class="fa-fw fab fa-java"></i><span> Java基础</span></a></li><li><a class="site-page child" href="/categories/Java%E8%BF%9B%E9%98%B6/"><i class="fa-fw fab fa-java"></i><span> Java进阶</span></a></li><li><a class="site-page child" href="/categories/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/"><i class="fa-fw fab fa-java"></i><span> JVM虚拟机</span></a></li><li><a class="site-page child" href="/categories/Spring/"><i class="fa-fw fab fa-dev"></i><span> Spring</span></a></li><li><a class="site-page child" href="/categories/SpringCloud/"><i class="fa-fw fab fa-dev"></i><span> SpringCloud</span></a></li><li><a class="site-page child" href="/categories/Golang/"><i class="fa-fw fab fa-dev"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/Docker/"><i class="fa-fw fab fa-docker"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"><i class="fa-fw fab fa-raspberry-pi"></i><span> 树莓派</span></a></li><li><a class="site-page child" href="/categories/yutool/"><i class="fa-fw fab fa-dev"></i><span> yutool系列</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/projects/"><i class="fa-fw fas fa-chart-bar"></i><span> 项目</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></div><div class="menus_item"><a class="site-page" href="/sites/"><i class="fa-fw fas fa-sitemap"></i><span> 站点</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">yupaits的博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/yupaits" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ts495606653@hotmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/Java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%88lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%89/" title="Java8函数式编程（lambda表达式）">     <img class="post_bg" src="/img/cover/post-cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java8函数式编程（lambda表达式）"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%88lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%89/" title="Java8函数式编程（lambda表达式）">Java8函数式编程（lambda表达式）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Lambda/">Lambda</a></span></div><div class="content">Java8函数式编程（lambda表达式）简介面向对象编程是对数据进行抽象；函数式编程是对行为进行抽象。
核心思想：使用不可变值和函数，函数对一个值进行处理，映射成另一个值。
对核心类库的改进主要包括集合类的API和新引入的流Stream。流使程序员可以站在更高的抽象层次上对集合进行操作。
示例
Lambda 表达式的 10 个示例

learn-java8

java8-tutorial

一文让你明白lambda用法与源码分析


分类
惰性求值方法

1list.stream.filter(f -&gt; f.getName().equals(&quot;p1&quot;));

这行代码并未做什么实际性的工作，filter知识描述了Stream，没有产生新的集合。
如果使多个条件组合，可以通过代码块{}

及早求值方法

1List&lt;Person&gt; resultList = list.stream().filter(f -&gt; f.getName().equals(&quot;p1&quot;)).collect(Collectors.toList());

c ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/Java%E5%85%B3%E9%94%AE%E5%AD%97/" title="Java关键字">     <img class="post_bg" src="/img/cover/post-cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java关键字"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Java%E5%85%B3%E9%94%AE%E5%AD%97/" title="Java关键字">Java关键字</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span></div><div class="content">Java关键字volatilevolatile是Java最轻量级的同步机制。
特性：

可见性。变量读写直接操作主存而不是CPU Cache。当一个线程修改了volatile修饰的变量后，无论是否加锁，其他线程都可以立即看到最新的修改。

禁止指令重排序优化。

保证变量可见性，但无法保证原子性。也就是说非线程安全。


Java内存模型：


详情可参考 深入分析volatile的实现原理

synchronized线程安全，锁区域内容一次只允许一个线程执行，通过锁机制控制。

当两个并发线程访问同一个对象object中的这个synchronized(this)同步代码块时，一个时间内只能有一个线程得到执行。另一个线程必须等待当前线程执行完这个代码块以后才能执行该代码块。

然而，当一个线程访问object的一个synchronized(this)同步代码块时，另一个线程仍然可以访问该object中的非synchronized(this)同步代码块。

尤其关键的是，当一个线程访问object的一个synchronized(this)同步代码块时，其他线程对object中所有其它sy ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9F%A5%E8%AF%86%E7%82%B9/" title="Java多线程知识点">     <img class="post_bg" src="/img/cover/post-cover9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java多线程知识点"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9F%A5%E8%AF%86%E7%82%B9/" title="Java多线程知识点">Java多线程知识点</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a></span></div><div class="content">Java多线程知识点Java多线程相关的一些面试题。

线程和进程有什么区别？
  一个进程是一个独立(self contained)的运行环境，它可以被看作一个程序或者一个应用。而线程是在进程中执行的一个任务。线程是进程的子集，一个进程可以有很多线程，每条线程并行执行不同的任务。不同的进程使用不同的内存空间，而所有的线程共享一片相同的内存空间。别把它和栈内存搞混，每个线程都拥有单独的栈内存用来存储本地数据。

如何在Java种实现线程？
  创建线程有两种方式：1、继承 Thread 类，扩展线程。2、实现 Runnable 接口。

启动一个线程是调用run()还是start()方法？
  启动一个线程是调用start()方法，使线程所代表的虚拟处理机处于可运行状态，这意味着它可以由JVM 调度并执行，这并不意味着线程就会立即运行。run()方法是线程启动后要进行回调（callback）的方法。

Thread类的sleep()方法和对象的wait()方法都可以让线程暂停执行，它们有什么区别？
  sleep()方法（休眠）是线程类（Thread）的静态方法，调用此方法会让当前线程 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/Java%E5%B9%B6%E5%8F%91%E6%BA%90%E7%A0%81%E5%90%88%E9%9B%86/" title="Java并发源码合集">     <img class="post_bg" src="/img/cover/post-cover10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发源码合集"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Java%E5%B9%B6%E5%8F%91%E6%BA%90%E7%A0%81%E5%90%88%E9%9B%86/" title="Java并发源码合集">Java并发源码合集</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JUC/">JUC</a></span></div><div class="content">Java并发源码合集
【死磕Java并发】—– 深入分析synchronized的实现原理
【死磕Java并发】—– 深入分析volatile的实现原理
【死磕Java并发】—– Java内存模型之happens-before
【死磕Java并发】—– Java内存模型之重排序
【死磕Java并发】—– Java内存模型之分析volatile
【死磕Java并发】—– Java内存模型之从JMM角度分析DCL
【死磕Java并发】—– Java内存模型之总结
【死磕Java并发】—– J.U.C之AQS：CLH同步队列
【死磕Java并发】—– J.U.C之AQS：同步状态的获取与释放
【死磕Java并发】—– J.U.C之AQS：阻塞和唤醒线程
【死磕Java并发】—– J.U.C之重入锁：ReentrantLock
【死磕Java并发】—– J.U.C之读写锁：ReentrantReadWriteLock
【死磕Java并发】—–J.U.C之Condition
【死磕Java并发】—- 深入分析CAS
【死磕Java并发】—- J.U.C之并发工具类：CyclicBarrier
【 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/Java%E5%BC%82%E5%B8%B8Exception/" title="Java异常Exception">     <img class="post_bg" src="/img/cover/post-cover8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java异常Exception"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Java%E5%BC%82%E5%B8%B8Exception/" title="Java异常Exception">Java异常Exception</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E5%BC%82%E5%B8%B8/">异常</a></span></div><div class="content">Java异常Exception捕获异常时需要注意 try、catch、finally 块中的控制转移语句。示例：
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111public class TryCatchFinallySample &#123;    private static int testFinallyReturn() &#123;        int i = 1;        try &#123;            return i;        &#125; catch (Exception e) &#123;            return i;        & ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/Java%E7%9A%84System.getProperty()%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8/" title="Java的System.getProperty()方法使用">     <img class="post_bg" src="/img/cover/post-cover1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java的System.getProperty()方法使用"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Java%E7%9A%84System.getProperty()%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8/" title="Java的System.getProperty()方法使用">Java的System.getProperty()方法使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span></div><div class="content">Java的System.getProperty()方法使用
引用自java的System.getProperty()方法使用

获取环境变量通过 System.getProperty(&quot;propertyName&quot;) 可以获得环境变量设置的值。
常见的Key值有：



key值
说明



java.version
Java 运行时环境版本


java.vendor
Java 运行时环境供应商


java.vendor.url
Java 供应商的 URL


java.home
Java 安装目录


java.vm.specification.version
Java 虚拟机规范版本


java.vm.specification.vendor
Java 虚拟机规范供应商


java.vm.specification.name
Java 虚拟机规范名称


java.vm.version
Java 虚拟机实现版本


java.vm.vendor
Java 虚拟机实现供应商


java.vm.name
Java 虚拟机实现名称


java.specifi ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/NIO%E4%BB%8B%E7%BB%8D/" title="NIO介绍">     <img class="post_bg" src="/img/cover/post-cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NIO介绍"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/NIO%E4%BB%8B%E7%BB%8D/" title="NIO介绍">NIO介绍</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/NIO/">NIO</a></span></div><div class="content">NIO介绍
引用自NIO介绍

简介NIO时Java 1.4引入的新特性。是对原来的Standard IO的扩展。
Standard IO时对字节流的读写，在进行IO之前，首先创建一个流对象，流对象进行读写操作都是按字节，一个字节一个字节的读或写。而NIO把IO抽象成块，类似磁盘的读写，每次IO操作的单位都是一个块，块被读入内存之后就是一个byte[]，NIO一次可以读或写多个字节。
组件Selector多路复用选择器，基于“事件驱动”，其核心就是通过Selector来轮询注册在其上的Channel，当发现某个或多个Channel处于就绪状态后，从阻塞状态返回就绪的Channel的SelectionKey集合，进行I&#x2F;O操作。

创建多路复用器并启动线程

12Selector selector = Selector.open();new Thread(new ReactorTask()).start();


创建Channel

123456789//打开ServerSocketChannel，用于监听客户端的连接ServerSocketChannel ssc = Ser ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/Netty%E9%95%BF%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1/" title="Netty长连接服务">     <img class="post_bg" src="/img/cover/post-cover9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Netty长连接服务"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/Netty%E9%95%BF%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1/" title="Netty长连接服务">Netty长连接服务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Netty/">Netty</a></span></div><div class="content">Netty长连接服务
引用自Netty 长连接服务

Netty是什么Netty: http://netty.io/

Netty is an asynchronous event-driven network application framework for rapid development of maintainable high performance protocol servers &amp; clients.

官方的解释最精准了，期中最吸引人的就是高性能了。但是很多人会有这样的疑问：直接用 NIO 实现的话，一定会更快吧？就像我直接手写 JDBC 虽然代码量大了点，但是一定比 iBatis 快！
但是，如果了解 Netty 后你才会发现，这个还真不一定！
利用 Netty 而不用 NIO 直接写的优势有这些：

高性能高扩展的架构设计，大部分情况下你只需要关注业务而不需要关注架构
Zero-Copy 技术尽量减少内存拷贝
为 Linux 实现 Native 版 Socket
写同一份代码，兼容 java 1.7 的 NIO2 和 1.7 之前版本的 NIO
Poole ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/ThreadLocal%E5%8E%9F%E7%90%86%E6%9C%BA%E5%88%B6/" title="ThreadLocal原理机制">     <img class="post_bg" src="/img/cover/post-cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ThreadLocal原理机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/ThreadLocal%E5%8E%9F%E7%90%86%E6%9C%BA%E5%88%B6/" title="ThreadLocal原理机制">ThreadLocal原理机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/ThreadLocal/">ThreadLocal</a></span></div><div class="content">ThreadLocal原理机制
参考Java多线程之隔离技术ThreadLocal源码详解

简介ThreadLocal存取的数据，总是与当前线程相关，也就是说，JVM为每个运行的线程绑定了私有的本地实例存取空间，从而为多线程环境常出现的并发访问问题提供了一种隔离机制。
ThreadLocal是如何做到为每一个线程维护变量的副本的呢？实现的思路很简单，在ThreadLocal类中有一个Map，用于存储每一个线程的变量的副本。
常用方法
T get()

返回此线程局部变量的当前线程副本中的值，如果这是线程第一次调用该方法，则创建并初始化此副本。
源码：
12345678910111213public T get() &#123;    Thread t = Thread.currentThread();    ThreadLocalMap map = getMap(t);    if (map != null) &#123;        ThreadLocalMap.Entry e = map.getEntry(this);        if (e != null) &#123;  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/epoll%E6%B5%85%E6%9E%90%E4%BB%A5%E5%8F%8Anio%E4%B8%AD%E7%9A%84Selector/" title="epoll浅析以及nio中的Selector">     <img class="post_bg" src="/img/cover/post-cover5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="epoll浅析以及nio中的Selector"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/epoll%E6%B5%85%E6%9E%90%E4%BB%A5%E5%8F%8Anio%E4%B8%AD%E7%9A%84Selector/" title="epoll浅析以及nio中的Selector">epoll浅析以及nio中的Selector</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/NIO/">NIO</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/epoll/">epoll</a></span></div><div class="content">epoll浅析以及nio中的Selector
引用自epoll浅析以及nio中的Selector

epoll基本原理首先介绍下epoll的基本原理，网上有很多版本，这里选择一个个人觉得相对清晰的讲解（详情见reference）：
首先我们来定义流的概念，一个流可以是文件，socket，pipe等等可以进行I&#x2F;O操作的内核对象。
不管是文件，还是套接字，还是管道，我们都可以把他们看作流。
之后我们来讨论I&#x2F;O的操作，通过read，我们可以从流中读入数据；通过write，我们可以往流写入数据。现在假定一个情形，我们需要从流中读数据，但是流中还没有数据，（典型的例子为，客户端要从socket读如数据，但是服务器还没有把数据传回来），这时候该怎么办？
阻塞：阻塞是个什么概念呢？比如某个时候你在等快递，但是你不知道快递什么时候过来，而且你没有别的事可以干（或者说接下来的事要等快递来了才能做）；那么你可以去睡觉了，因为你知道快递把货送来时一定会给你打个电话（假定一定能叫醒你）。
非阻塞忙轮询：接着上面等快递的例子，如果用忙轮询的方法，那么你需要知道快递员的手机号，然后每分钟给 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/%E5%B8%B8%E7%94%A8Java%E7%B1%BB%E5%BA%93/" title="常用Java类库">     <img class="post_bg" src="/img/cover/post-cover11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常用Java类库"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/%E5%B8%B8%E7%94%A8Java%E7%B1%BB%E5%BA%93/" title="常用Java类库">常用Java类库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span></div><div class="content">常用Java类库Runtime类
JVM虚拟机注册一个钩子，当虚拟机要关闭时，会执行预先注册的线程任务。

123456789101112Runtime.getRuntime().addShutdownHook(new Thread() &#123;    public void run() &#123;        try &#123;            logger.info(&quot;## stop the canal client&quot;);            clientTest.stop();        &#125; catch (Throwable e) &#123;            logger.warn(&quot;##something goes wrong when stopping canal:\n&#123;&#125;&quot;, ExceptionUtils.getFullStackTrace(e));        &#125; finally &#123;            logger.info(&quot;## ca ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/%E5%B8%B8%E8%A7%81%E9%94%81/" title="常见锁">     <img class="post_bg" src="/img/cover/post-cover10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见锁"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/%E5%B8%B8%E8%A7%81%E9%94%81/" title="常见锁">常见锁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/JUC/">JUC</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E9%94%81/">锁</a></span></div><div class="content">常见锁基础概念：

并发（Concurrency）：一个处理器“同时”处理多个任务

并行（Parallelism）：多个处理器“同时”处理多个任务


互斥锁（Mutex）
同步块 synchronized block

对象锁 object.lock()

可重入锁


可重入锁，也叫做递归锁，指的是同一线程外层方法获得锁之后，内层递归方法仍然有获取该锁的代码，但不受影响。ReentrantLock和synchronized都是可重入锁。
在lock方法内，应验证线程是否为已经获得锁的线程。当unlock()第一次调用时，实际上不应释放锁。（采用计数进行统计）
可重入锁最大的特点是避免死锁。
12345678910111213141516171819202122public class Test implements Runnable&#123;    public synchronized void get()&#123;        System.out.println(Thread.currentThread().getId());        set();    &#1 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="常见问题">     <img class="post_bg" src="/img/cover/post-cover2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="常见问题">常见问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a></span></div><div class="content">常见问题
SimpleDateFormat不是线程安全的
 使用过程中不要定义为静态全局变量。
 正确使用：
 123456789101112/*** 时间是否是今天*/public static boolean isToday(Long second) &#123;    if (second == null) &#123;        return false;    &#125;    SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);    String today = sf.format(System.currentTimeMillis());    String compare = sf.format(new Date(second * 1000L));    return StringUtils.equals(today, compare);&#125;

 或者使用ThreadLocal：
 123456private static final ThreadLocal&lt;DateF ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-advanced/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式">     <img class="post_bg" src="/img/cover/post-cover1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="正则表达式"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式">正则表达式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E6%AD%A3%E5%88%99/">正则</a></span></div><div class="content">正则表达式常用正则表达式


规则
表达式



一个或多个汉字
^[\u0391-\uFFE5]+$


邮政编码
^[1-9]\d&#123;5&#125;$


QQ号码
^[1-9]\d&#123;4,10&#125;$


用户名（字母开头 + 数字&#x2F;字母&#x2F;下划线）
^[A-Za-z][A-Za-z1-9_-]+$


手机号码
^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]&#123;8&#125;$


URL
^((http|https)://)?([\w-]+\\.)+[\w-]+(/[\w-./?%&amp;=]*)?$


18位身份证号
^(\d&#123;6&#125;)(18|19|20)?(\d&#123;2&#125;)([01]\d)([0123]\d)(\d&#123;3&#125;)(\d|X|x)?$


邮箱
^[a-zA-Z_]&#123;1,&#125;[0-9]&#123;0,&#125;@(([a-zA-z0-9]-*)&#123;1,&#125;\\.)&#123;1, ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-advanced/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E8%AF%BBTomcat%E4%B8%AD%E7%9A%84NIO%E6%A8%A1%E5%9E%8B/" title="深度解读Tomcat中的NIO模型">     <img class="post_bg" src="/img/cover/post-cover1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深度解读Tomcat中的NIO模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-advanced/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E8%AF%BBTomcat%E4%B8%AD%E7%9A%84NIO%E6%A8%A1%E5%9E%8B/" title="深度解读Tomcat中的NIO模型">深度解读Tomcat中的NIO模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E8%BF%9B%E9%98%B6/">Java进阶</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/NIO/">NIO</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Tomcat/">Tomcat</a></span></div><div class="content">深度解读Tomcat中的NIO模型
引用自深度解读 Tomcat 中的 NIO 模型


摘要: I&#x2F;O复用模型，是同步非阻塞，这里的非阻塞是指I&#x2F;O读写，对应的是recvfrom操作，因为数据报文已经准备好，无需阻塞。

说它是同步，是因为，这个执行是在一个线程里面执行的。有时候，还会说它又是阻塞的，实际上是指阻塞在select上面，必须等到读就绪、写就绪等网络事件。
I&#x2F;O复用模型解读Tomcat的NIO是基于I&#x2F;O复用来实现的。对这点一定要清楚，不然我们的讨论就不在一个逻辑线上。下面这张图学习过I&#x2F;O模型知识的一般都见过，出自《UNIX网络编程》，I&#x2F;O模型一共有阻塞式I&#x2F;O，非阻塞式I&#x2F;O，I&#x2F;O复用(select&#x2F;poll&#x2F;epoll)，信号驱动式I&#x2F;O和异步I&#x2F;O。这篇文章讲的是I&#x2F;O复用。

这里先来说下用户态和内核态，直白来讲，如果线程执行的是用户代码，当前线程处在用户态，如果线程执行的是内核里面的代码，当前线程处在内核态。更深层来 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-base/ArrayList/" title="ArrayList">     <img class="post_bg" src="/img/cover/post-cover5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ArrayList"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-base/ArrayList/" title="ArrayList">ArrayList</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E9%9B%86%E5%90%88/">集合</a></span></div><div class="content">ArrayList
引用自图解集合 1 ：ArrayList

包含元素ArrayList包含的元素：



元素
作用



transient Object[] elementData;
ArrayList是基于数组的一个实现，elementData就是底层的数组


private int size;
ArrayList里面元素的个数，这里要注意一下，size是按照调用add、remove方法的次数进行自增或者自减的，所以add一个null进入ArrayList，size也会加1


关注点


集合关注点
结论



ArrayList是否允许空
允许


ArrayList是否允许重复数据
允许


ArrayList是否有序
有序


ArrayList是否线程安全
非线程安全


关键方法添加元素12345public boolean add(E e) &#123;    ensureCapacityInternal(size + 1);  // Increments modCount!!    elementData[size++] = e;    return tru ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-base/Collection%E6%8E%A5%E5%8F%A3/" title="Collection接口">     <img class="post_bg" src="/img/cover/post-cover5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Collection接口"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-base/Collection%E6%8E%A5%E5%8F%A3/" title="Collection接口">Collection接口</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E9%9B%86%E5%90%88/">集合</a></span></div><div class="content">Collection接口类图

引用自Java集合类: Set、List、Map、Queue使用场景梳理

Collection类的父接口Iterable是迭代器接口。实现了Iterable接口的对象允许使用foreach进行遍历，所以，所有Collection集合对象都具有”foreach可遍历性”。
Collection代表一组Object的集合，这些Object被称作Collection的元素。Collection是一个接口，用以提供规范定义，不能被实例化使用。
Collection和Map的区别Collection和Map的区别在于容器中每个位置保存的元素类别。
Collection每个位置只能保存一个元素（对象）；Map保存的是”键值对”，类似于一个小型数据库，可以通过”键”找到对应的”值”。
</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-base/CopyOnWriteArrayList/" title="CopyOnWriteArrayList">     <img class="post_bg" src="/img/cover/post-cover8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CopyOnWriteArrayList"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-base/CopyOnWriteArrayList/" title="CopyOnWriteArrayList">CopyOnWriteArrayList</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/CopyOnWriteArrayList/">CopyOnWriteArrayList</a></span></div><div class="content">CopyOnWriteArrayList
引用自图解集合 3 : CopyOnWriteArrayList


CopyOnWriteArrayList位于java.util.concurrent包下，可想而知，这个类是为并发而设计的

CopyOnWriteArrayList，顾名思义，Write的时候总是要Copy，也就是说对于CopyOnWriteArrayList，任何可变的操作（add、set、remove等等）都是伴随复制这个动作的


关注点


集合关注点
结论



CopyOnWriteArrayList是否允许空
允许


CopyOnWriteArrayList是否允许重复数据
允许


CopyOnWriteArrayList是否有序
有序


CopyOnWriteArrayList是否线程安全
线程安全


添加元素对于CopyOnWriteArrayList来说，增加、删除、修改、插入的原理都是一样的，所以用增加元素来分析以下Copy’O’n’Write’Array’List的底层实现机制就可以了。
12345public static void mai ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/02/04/java/java-base/File%E7%B1%BB/" title="File类">     <img class="post_bg" src="/img/cover/post-cover4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="File类"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-base/File%E7%B1%BB/" title="File类">File类</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/IO/">IO</a></span></div><div class="content">File类
引用自java中的IO整理


初始化变量
  123456private static final String FILENAME = &quot;E:\\hello.txt&quot;;private static final String FILENAME_WITH_SEPARATOR = &quot;E:&quot; + File.separator + &quot;world.txt&quot;;private static final String DIRECTORY_NAME = &quot;E:&quot; + File.separator + &quot;hello&quot; + File.separator + &quot;world&quot;;private static final String ROOT_DIRECTORY = &quot;E:&quot; + File.separator;private static final String SUCCESS = &quot;成功&quot;;private static final Stri ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/02/04/java/java-base/HashMap/" title="HashMap">     <img class="post_bg" src="/img/cover/post-cover7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HashMap"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/02/04/java/java-base/HashMap/" title="HashMap">HashMap</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-02-04T01:41:37.000Z" title="发表于 2020-02-04 09:41:37">2020-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/HashMap/">HashMap</a></span></div><div class="content">HashMap
引用自图解集合 4 ：HashMap

HashMap是一种非常常见、方便和有用的集合，是一种键值对（K-V）形式的存储结构，下面将还是用图示的方式解读HashMap的实现原理。
关注点


集合关注点
结论



HashMap是否允许空
Key和Value都允许为空


HashMap是否允许重复数据
Key重复会覆盖、Value允许重复


HashMap是否有序
无序，特别说明这个无序指的是遍历HashMap的时候，得到的元素顺序基本不可能是put的顺序


HashMap是否线程安全
非线程安全


关键方法添加数据HashMap的存储单元Entry：
123456789101112/** * Basic hash bin node, used for most entries.  (See below for * TreeNode subclass, and in LinkedHashMap for its Entry subclass.) */static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V& ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/7/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/#content-inner">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/#content-inner">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><a class="extend next" rel="next" href="/page/9/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">yupaits</div><div class="author-info__description">俯仰一生，最惧无为</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">216</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">161</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yupaits"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yupaits" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ts495606653@hotmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">技术分享，欢迎讨论！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/12/20/Java%E6%B5%81%E5%BC%8FAPI/" title="Java流式API">Java流式API</a><time datetime="2021-12-20T06:30:15.000Z" title="发表于 2021-12-20 14:30:15">2021-12-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/12/19/yutool/yutool%E7%AE%80%E4%BB%8B/" title="yutool简介">yutool简介</a><time datetime="2021-12-19T13:32:05.000Z" title="发表于 2021-12-19 21:32:05">2021-12-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/12/19/Java%E7%9A%84Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/" title="Java的Lambda表达式与函数式接口">Java的Lambda表达式与函数式接口</a><time datetime="2021-12-19T12:04:31.000Z" title="发表于 2021-12-19 20:04:31">2021-12-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/08/11/web-architecture/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" title="消息中间件">消息中间件</a><time datetime="2021-08-11T15:42:08.000Z" title="发表于 2021-08-11 23:42:08">2021-08-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/07/01/architecture/%E9%80%9A%E7%94%A8%E5%8F%AF%E7%BC%96%E6%8E%92%E7%8A%B6%E6%80%81%E6%9C%BA%E5%BC%95%E6%93%8E%E8%AE%BE%E8%AE%A1/" title="通用可编排状态机引擎设计">通用可编排状态机引擎设计</a><time datetime="2021-07-01T07:55:15.000Z" title="发表于 2021-07-01 15:55:15">2021-07-01</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CI-CD/"><span class="card-category-list-name">CI/CD</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Golang/"><span class="card-category-list-name">Golang</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/"><span class="card-category-list-name">JVM虚拟机</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/"><span class="card-category-list-name">Java基础</span><span class="card-category-list-count">38</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E8%BF%9B%E9%98%B6/"><span class="card-category-list-name">Java进阶</span><span class="card-category-list-count">20</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 1.1em; color: #999">AOP</a> <a href="/tags/API-Security/" style="font-size: 1.1em; color: #999">API Security</a> <a href="/tags/API%E7%BD%91%E5%85%B3/" style="font-size: 1.1em; color: #999">API网关</a> <a href="/tags/APM/" style="font-size: 1.1em; color: #999">APM</a> <a href="/tags/Aria2/" style="font-size: 1.1em; color: #999">Aria2</a> <a href="/tags/CAP/" style="font-size: 1.1em; color: #999">CAP</a> <a href="/tags/CentOS/" style="font-size: 1.1em; color: #999">CentOS</a> <a href="/tags/Checklist/" style="font-size: 1.16em; color: #999b9e">Checklist</a> <a href="/tags/Code-Review/" style="font-size: 1.1em; color: #999">Code Review</a> <a href="/tags/ConcurrentHashMap/" style="font-size: 1.1em; color: #999">ConcurrentHashMap</a> <a href="/tags/Config-Server/" style="font-size: 1.1em; color: #999">Config Server</a> <a href="/tags/Confluence/" style="font-size: 1.1em; color: #999">Confluence</a> <a href="/tags/CopyOnWriteArrayList/" style="font-size: 1.1em; color: #999">CopyOnWriteArrayList</a> <a href="/tags/Design-Pattern/" style="font-size: 1.44em; color: #99a7ba">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 1.39em; color: #99a4b4">Docker</a> <a href="/tags/Dockerfile/" style="font-size: 1.1em; color: #999">Dockerfile</a> <a href="/tags/Full-GC/" style="font-size: 1.1em; color: #999">Full GC</a> <a href="/tags/GC/" style="font-size: 1.1em; color: #999">GC</a> <a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a> <a href="/tags/Git/" style="font-size: 1.21em; color: #999ea4">Git</a> <a href="/tags/Git-Flow/" style="font-size: 1.1em; color: #999">Git Flow</a> <a href="/tags/GitHub/" style="font-size: 1.1em; color: #999">GitHub</a> <a href="/tags/GitLab/" style="font-size: 1.27em; color: #99a0a9">GitLab</a> <a href="/tags/GitLab-CI/" style="font-size: 1.1em; color: #999">GitLab-CI</a> <a href="/tags/Gitee/" style="font-size: 1.1em; color: #999">Gitee</a> <a href="/tags/Golang/" style="font-size: 1.21em; color: #999ea4">Golang</a> <a href="/tags/HashMap/" style="font-size: 1.16em; color: #999b9e">HashMap</a> <a href="/tags/Hexo/" style="font-size: 1.1em; color: #999">Hexo</a> <a href="/tags/IO/" style="font-size: 1.33em; color: #99a2af">IO</a> <a href="/tags/IOC/" style="font-size: 1.1em; color: #999">IOC</a> <a href="/tags/JUC/" style="font-size: 1.21em; color: #999ea4">JUC</a> <a href="/tags/JVM/" style="font-size: 1.33em; color: #99a2af">JVM</a> <a href="/tags/Java/" style="font-size: 1.5em; color: #99a9bf">Java</a> <a href="/tags/Jenkins/" style="font-size: 1.16em; color: #999b9e">Jenkins</a> <a href="/tags/Jira/" style="font-size: 1.16em; color: #999b9e">Jira</a> <a href="/tags/Lambda/" style="font-size: 1.1em; color: #999">Lambda</a> <a href="/tags/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.16em; color: #999b9e">Lambda表达式</a> <a href="/tags/License/" style="font-size: 1.1em; color: #999">License</a> <a href="/tags/LinkedHashMap/" style="font-size: 1.1em; color: #999">LinkedHashMap</a> <a href="/tags/LinkedList/" style="font-size: 1.1em; color: #999">LinkedList</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">八月 2020</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">五月 2020</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">四月 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">216</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">428.8k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-08-23T15:52:30.387Z"></div></div></div></div></div></div></main><footer id="footer" style="background: #1f1f1f"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2022 By yupaits</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "IDEA-灵感 ACTION-行动 ACCUMULATION-积累".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: false,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = 'I'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=retro'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://Daf7PjBe.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'Daf7PjBeGob17A0xwU6E4YT6-gzGzoHsz',
        "X-LC-Key": 'O4QrwOFRkDaREqRjoMwG9fD8',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>((window.gitter = {}).chat = {}).options = {
  disableDefaultChat: true,
};
document.addEventListener('gitter-sidecar-ready', (e) => {
  const GitterChat = e.detail.Chat
  let chat

  function initGitter () {
    chat = new GitterChat({
      room: 'yupaits/yupaits-blog',
      activationElement: '#chat_btn'
    });
  }

  initGitter()

  if (false) {
    document.addEventListener('pjax:complete', () => {
      chat.destroy()
      initGitter()
    })
  }

})</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>